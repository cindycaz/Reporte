

@model Promedios.Models.PromediosModel
    <div class="row">


    <div class="page-header col-md-6">
        <h1>Reporte de Calificaciones</h1>
    </div>
        <div class="col-md-6 pull-right">
            <div id="openweathermap-widget-19" class="pull-right"></div>
        </div>
    </div>
    <div class="row">

    @using (Html.BeginForm("Index", "Home", FormMethod.Post, new { enctype = "multipart/form-data" }))
            {
        <div class="col-md-4">
            @Html.TextBoxFor(m => m.file, new { type = "file" })
            <button id="submitButton" class="btn-success" type="submit">Adjuntar archivo</button>
        </div>

    }
    <div class="row col-md-4">
        @using (Html.BeginForm("Reset", "Home"))
            {

            <button id="reset" class="btn-primary">Limpiar Tabla</button>

        }
        <button id="creagrafica" class="btn-primary">Generar Gráfica</button>
    </div>
        <div class="col-md-4">
            <div class="col">
                <div>
                    <label>Alumno con mejor calificación: </label>
                    <label id="mejorAlumno" class="label label-primary label-small"></label>
                </div>
                <div>
                    <label>Alumno con menor calificación: </label>
                    <label id="peorAlumno" class="label label-primary label-small"></label>
                </div>
                <div>
                    <label>Promedio de Grupo: </label>
                    <label id="promedioGrupal" class="label label-primary label-small"></label>
                </div>
            </div>
        </div>
</div>


<div class="row">
    <div class="col-md-12">
        <div class="col">

            <div class="excelDiv">
                @(new HtmlString(ViewBag.ExcelData))

            </div>
        </div>
    </div> 
   </div>
<div class="row">
    <div class="col-md-12">
        <div class="col">

            <div id="excelGrafica">
                <canvas id='myChart'> </canvas>
            </div>
        </div>
    </div>

</div>
<br />
<div class="row">
    <div class="col-md-12 hidden pull-left" id="rotarUsuario">
        <div class="col">

            <label>Numero a rotar para clave de usuario:</label>
            <input type="number" id="rotacionesIzq" />
            <button id="rotarClave" class="btn btn-primary">Rotar Clave de Usuario</button>
        </div>
    </div>

</div>


    @section Scripts{

        <script src="~/Scripts/jquery-1.10.2.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
        <script src="~/Scripts/Controller/PromediosController.js"></script>


        <script type="text/javascript">

            var Promedios = new PromediosController();
            window.myWidgetParam ? window.myWidgetParam : window.myWidgetParam = [];
            window.myWidgetParam.push({ id: 19, cityid: '4004898', appid: '3c0b577bd79ac597f28a0ef3bc115a29', units: 'metric', containerid: 'openweathermap-widget-19', });

            $(function () {

                //Botón para crear grafica de barras
                $(document).on("click", "#creagrafica", function (e) {
                    $("#rotarUsuario").removeClass("hidden");
                    Promedios.crearGrafica();

                });

                //Botón para rotar la clave de usuario
                $(document).on("click", "#rotarClave", function (e) {
                    var rotaciones = $("#rotacionesIzq").val();
                    Promedios.rotarClave(rotaciones);
                });

                var script = document.createElement('script'); script.async = true;
                script.charset = "utf-8"; script.src = "//openweathermap.org/themes/openweathermap/assets/vendor/owm/js/weather-widget-generator.js";
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);


            });

        </script>
    }
